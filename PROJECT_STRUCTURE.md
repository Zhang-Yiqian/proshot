# ProShot é¡¹ç›®æ–‡ä»¶ç»“æ„è¯´æ˜

## ğŸ“‚ å®Œæ•´ç›®å½•æ ‘

```
ProShot/
â”‚
â”œâ”€â”€ ğŸ“„ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json              # é¡¹ç›®ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ tsconfig.json             # TypeScripté…ç½®
â”‚   â”œâ”€â”€ next.config.js            # Next.jsé…ç½®
â”‚   â”œâ”€â”€ tailwind.config.ts        # Tailwind CSSé…ç½®
â”‚   â”œâ”€â”€ postcss.config.js         # PostCSSé…ç½®
â”‚   â”œâ”€â”€ components.json           # Shadcn/UIé…ç½®
â”‚   â”œâ”€â”€ .eslintrc.json            # ESLinté…ç½®
â”‚   â”œâ”€â”€ .gitignore                # Gitå¿½ç•¥æ–‡ä»¶
â”‚   â”œâ”€â”€ middleware.ts             # Next.jsä¸­é—´ä»¶ï¼ˆSupabaseè®¤è¯ï¼‰
â”‚   â”œâ”€â”€ README.md                 # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”‚   â””â”€â”€ PRD.md                    # äº§å“éœ€æ±‚æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ“± app/ (Next.js 14 App Routeræ ¸å¿ƒç›®å½•)
â”‚   â”‚
â”‚   â”œâ”€â”€ layout.tsx                # å…¨å±€å¸ƒå±€ï¼ˆå­—ä½“ã€Providerï¼‰
â”‚   â”œâ”€â”€ page.tsx                  # é¦–é¡µ Landing Page
â”‚   â”œâ”€â”€ globals.css               # å…¨å±€æ ·å¼ï¼ˆTailwindå˜é‡ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ” (auth)/               # è®¤è¯è·¯ç”±ç»„ï¼ˆä¸å½±å“URLï¼‰
â”‚   â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx          # ç™»å½•é¡µé¢
â”‚   â”‚   â””â”€â”€ register/
â”‚   â”‚       â””â”€â”€ page.tsx          # æ³¨å†Œé¡µé¢
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ¨ workbench/            # å·¥ä½œå°ï¼ˆæ ¸å¿ƒåŠŸèƒ½é¡µï¼‰
â”‚   â”‚   â””â”€â”€ page.tsx              # ä¸Šä¼ +é…ç½®+ç”Ÿæˆé¡µé¢
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ–¼ï¸ gallery/              # ä½œå“ç”»å»Š
â”‚   â”‚   â””â”€â”€ page.tsx              # å†å²ç”Ÿæˆè®°å½•å±•ç¤º
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ’° pricing/              # å®šä»·é¡µé¢
â”‚   â”‚   â””â”€â”€ page.tsx              # ç§¯åˆ†å¥—é¤å±•ç¤º
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ”Œ api/                  # API Routesï¼ˆåç«¯æ¥å£ï¼‰
â”‚       â”œâ”€â”€ auth/
â”‚       â”‚   â””â”€â”€ callback/
â”‚       â”‚       â””â”€â”€ route.ts      # Supabase Authå›è°ƒ
â”‚       â”œâ”€â”€ generate/
â”‚       â”‚   â””â”€â”€ main/
â”‚       â”‚       â””â”€â”€ route.ts      # ä¸»å›¾ç”Ÿæˆæ¥å£
â”‚       â”œâ”€â”€ credits/
â”‚       â”‚   â””â”€â”€ route.ts          # ç§¯åˆ†ç®¡ç†æ¥å£
â”‚       â””â”€â”€ generations/
â”‚           â””â”€â”€ route.ts          # ç”Ÿæˆè®°å½•æŸ¥è¯¢æ¥å£
â”‚
â”œâ”€â”€ ğŸ§© components/ (Reactç»„ä»¶åº“)
â”‚   â”‚
â”‚   â”œâ”€â”€ ui/                       # Shadcn/UIåŸºç¡€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ button.tsx            # æŒ‰é’®ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ card.tsx              # å¡ç‰‡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ input.tsx             # è¾“å…¥æ¡†ç»„ä»¶
â”‚   â”‚   â””â”€â”€ badge.tsx             # å¾½ç« ç»„ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ layout/                   # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ header.tsx            # å…¨å±€é¡¶éƒ¨å¯¼èˆª
â”‚   â”‚   â””â”€â”€ footer.tsx            # å…¨å±€åº•éƒ¨
â”‚   â”‚
â”‚   â”œâ”€â”€ workbench/                # å·¥ä½œå°ä¸“ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ upload-zone.tsx       # ä¸Šä¼ åŒºï¼ˆæ‹–æ‹½ä¸Šä¼ ï¼‰
â”‚   â”‚   â””â”€â”€ config-panel.tsx      # é…ç½®é¢æ¿ï¼ˆæ¨¡ç‰¹/åœºæ™¯é€‰æ‹©ï¼‰
â”‚   â”‚
â”‚   â””â”€â”€ common/                   # é€šç”¨ç»„ä»¶
â”‚       â””â”€â”€ credits-badge.tsx     # ç§¯åˆ†æ˜¾ç¤ºå¾½ç« 
â”‚
â”œâ”€â”€ ğŸ”§ lib/ (å·¥å…·åº“ä¸ä¸šåŠ¡é€»è¾‘)
â”‚   â”‚
â”‚   â”œâ”€â”€ supabase/                 # Supabaseé›†æˆ
â”‚   â”‚   â”œâ”€â”€ client.ts             # å®¢æˆ·ç«¯å®ä¾‹ï¼ˆç”¨äºå®¢æˆ·ç«¯ç»„ä»¶ï¼‰
â”‚   â”‚   â”œâ”€â”€ server.ts             # æœåŠ¡ç«¯å®ä¾‹ï¼ˆç”¨äºAPI/SSRï¼‰
â”‚   â”‚   â””â”€â”€ middleware.ts         # ä¸­é—´ä»¶å·¥å…·å‡½æ•°
â”‚   â”‚
â”‚   â”œâ”€â”€ ai/                       # AIæ¥å£å°è£…
â”‚   â”‚   â”œâ”€â”€ gemini-client.ts      # Gemini APIè°ƒç”¨ï¼ˆå…¼å®¹One APIï¼‰
â”‚   â”‚   â””â”€â”€ prompt-builder.ts     # Promptæ„å»ºå™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ db/                       # æ•°æ®åº“æ“ä½œå±‚
â”‚   â”‚   â”œâ”€â”€ profiles.ts           # ç”¨æˆ·Profile CRUD
â”‚   â”‚   â””â”€â”€ generations.ts        # ç”Ÿæˆè®°å½• CRUD
â”‚   â”‚
â”‚   â””â”€â”€ utils.ts                  # é€šç”¨å·¥å…·å‡½æ•°ï¼ˆcnç­‰ï¼‰
â”‚
â”œâ”€â”€ âš™ï¸ config/ (é…ç½®ä¸­å¿ƒ)
â”‚   â”œâ”€â”€ site.ts                   # ç½‘ç«™åŸºç¡€é…ç½®ï¼ˆåç§°ã€æè¿°ã€ç§¯åˆ†è§„åˆ™ï¼‰
â”‚   â”œâ”€â”€ models.ts                 # AIæ¨¡å‹é…ç½®ï¼ˆGeminiæ¨¡å‹åç§°ï¼‰
â”‚   â””â”€â”€ presets.ts                # é¢„è®¾é…ç½®ï¼ˆæ¨¡ç‰¹ç±»å‹ã€åœºæ™¯åˆ—è¡¨ï¼‰
â”‚
â”œâ”€â”€ ğŸ“˜ types/ (TypeScriptç±»å‹å®šä¹‰)
â”‚   â”œâ”€â”€ database.ts               # Supabaseæ•°æ®åº“ç±»å‹
â”‚   â”œâ”€â”€ generation.ts             # ç”Ÿæˆç›¸å…³ç±»å‹
â”‚   â””â”€â”€ user.ts                   # ç”¨æˆ·ç›¸å…³ç±»å‹
â”‚
â”œâ”€â”€ ğŸª hooks/ (è‡ªå®šä¹‰React Hooks)
â”‚   â”œâ”€â”€ use-user.ts               # ç”¨æˆ·ä¿¡æ¯Hookï¼ˆå«Profileï¼‰
â”‚   â””â”€â”€ use-credits.ts            # ç§¯åˆ†ç®¡ç†Hook
â”‚
â””â”€â”€ ğŸ—„ï¸ supabase/ (æ•°æ®åº“ç›¸å…³)
    â””â”€â”€ migrations/
        â””â”€â”€ 001_initial_schema.sql # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
```

---

## ğŸ“‹ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### ğŸ¯ å…¥å£ä¸é…ç½®

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `app/layout.tsx` | å…¨å±€å¸ƒå±€ï¼Œå¼•å…¥å­—ä½“ã€Provider |
| `app/page.tsx` | Landing Pageé¦–é¡µ |
| `middleware.ts` | Supabaseè®¤è¯ä¸­é—´ä»¶ |
| `next.config.js` | é…ç½®å›¾ç‰‡åŸŸåã€ç¯å¢ƒå˜é‡ç­‰ |

### ğŸ” è®¤è¯ç³»ç»Ÿ

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `app/(auth)/login/page.tsx` | ç™»å½•é¡µé¢ |
| `app/(auth)/register/page.tsx` | æ³¨å†Œé¡µé¢ |
| `app/api/auth/callback/route.ts` | OAuthå›è°ƒå¤„ç† |
| `lib/supabase/client.ts` | å®¢æˆ·ç«¯Supabaseå®ä¾‹ |
| `lib/supabase/server.ts` | æœåŠ¡ç«¯Supabaseå®ä¾‹ |

### ğŸ¨ æ ¸å¿ƒä¸šåŠ¡

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `app/workbench/page.tsx` | å·¥ä½œå°ä¸»é¡µé¢ |
| `components/workbench/upload-zone.tsx` | æ‹–æ‹½ä¸Šä¼ ç»„ä»¶ |
| `components/workbench/config-panel.tsx` | æ¨¡ç‰¹/åœºæ™¯é€‰æ‹©é¢æ¿ |
| `app/api/generate/main/route.ts` | å›¾ç‰‡ç”ŸæˆAPI |

### ğŸ¤– AIé›†æˆ

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `lib/ai/gemini-client.ts` | Gemini APIå°è£…ï¼ˆOpenAIæ ¼å¼ï¼‰ |
| `lib/ai/prompt-builder.ts` | æ ¹æ®é¢„è®¾æ„å»ºPrompt |
| `config/models.ts` | æ¨¡å‹åç§°é…ç½® |
| `config/presets.ts` | æ¨¡ç‰¹å’Œåœºæ™¯é¢„è®¾åº“ |

### ğŸ’¾ æ•°æ®å±‚

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `lib/db/profiles.ts` | ç”¨æˆ·ç§¯åˆ†ç®¡ç† |
| `lib/db/generations.ts` | ç”Ÿæˆè®°å½•CRUD |
| `supabase/migrations/001_initial_schema.sql` | æ•°æ®åº“è¡¨ç»“æ„ |
| `types/database.ts` | æ•°æ®åº“ç±»å‹å®šä¹‰ |

### ğŸ UIç»„ä»¶

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `components/ui/*` | Shadcn/UIåŸºç¡€ç»„ä»¶åº“ |
| `components/layout/header.tsx` | å…¨å±€å¯¼èˆªæ ï¼ˆå«ç§¯åˆ†æ˜¾ç¤ºï¼‰ |
| `components/common/credits-badge.tsx` | ç§¯åˆ†å¾½ç« ç»„ä»¶ |

---

## ğŸ”„ æ•°æ®æµå‘

### ç”¨æˆ·æ³¨å†Œæµç¨‹
```
æ³¨å†Œé¡µé¢ (register/page.tsx)
  â†“ è°ƒç”¨ Supabase Auth
Supabase è§¦å‘å™¨
  â†“ è‡ªåŠ¨åˆ›å»º Profileï¼ˆèµ é€5ç§¯åˆ†ï¼‰
é‡å®šå‘åˆ°å·¥ä½œå°
```

### å›¾ç‰‡ç”Ÿæˆæµç¨‹
```
å·¥ä½œå° (workbench/page.tsx)
  â†“ ä¸Šä¼ å›¾ç‰‡åˆ° Supabase Storage
  â†“ æäº¤ç”Ÿæˆè¯·æ±‚
API (/api/generate/main/route.ts)
  â†“ æ„å»º Prompt (prompt-builder.ts)
  â†“ è°ƒç”¨ Gemini API (gemini-client.ts)
  â†“ ä¿å­˜ç”Ÿæˆè®°å½•åˆ°æ•°æ®åº“
è¿”å›ç”Ÿæˆç»“æœ
```

### ç§¯åˆ†æ‰£é™¤æµç¨‹
```
ç‚¹å‡»ä¸‹è½½æŒ‰é’®
  â†“ è°ƒç”¨ /api/credits
æ£€æŸ¥ä½™é¢
  â†“ æ‰£é™¤ç§¯åˆ†
  â†“ æ›´æ–°æ•°æ®åº“
è¿”å›æ–°ä½™é¢
```

---

## ğŸš€ å¯åŠ¨æ­¥éª¤

1. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

2. **é…ç½®ç¯å¢ƒå˜é‡** (`.env.local`)
   - Supabase URL å’Œ Key
   - Gemini API Key å’Œ Base URL

3. **åˆå§‹åŒ–æ•°æ®åº“**
   - åœ¨Supabaseæ‰§è¡Œ `001_initial_schema.sql`

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   npm run dev
   ```

5. **è®¿é—®åº”ç”¨**
   - http://localhost:3000

---

## ğŸ“Œ å…³é”®è®¾è®¡å†³ç­–

### ä¸ºä»€ä¹ˆä½¿ç”¨App Routerï¼Ÿ
- âœ… æœåŠ¡ç«¯ç»„ä»¶é»˜è®¤ï¼Œæ€§èƒ½æ›´å¥½
- âœ… æ–‡ä»¶ç³»ç»Ÿè·¯ç”±ï¼Œç»“æ„æ¸…æ™°
- âœ… å†…ç½®API Routesï¼Œå‰åç«¯ä¸€ä½“

### ä¸ºä»€ä¹ˆä½¿ç”¨Supabaseï¼Ÿ
- âœ… PostgreSQL + Auth + Storageä¸€ç«™å¼
- âœ… RLS (Row Level Security) æ•°æ®å®‰å…¨
- âœ… å®æ—¶è®¢é˜…èƒ½åŠ›ï¼ˆåç»­å¯æ‰©å±•ï¼‰

### ä¸ºä»€ä¹ˆå°è£…Gemini APIï¼Ÿ
- âœ… å…¼å®¹One APIï¼ˆå¤šæ¨¡å‹ç»Ÿä¸€è°ƒç”¨ï¼‰
- âœ… ä¾¿äºåˆ‡æ¢æ¨¡å‹ï¼ˆä¸»å›¾ç”¨Proï¼Œå¥—å›¾ç”¨Flashï¼‰
- âœ… ç»Ÿä¸€é”™è¯¯å¤„ç†å’Œé‡è¯•é€»è¾‘

---

## ğŸ“ å¼€å‘å»ºè®®

1. **æ·»åŠ æ–°é¡µé¢**ï¼šåœ¨ `app/` ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹
2. **æ·»åŠ æ–°ç»„ä»¶**ï¼šåœ¨ `components/` ç›¸åº”åˆ†ç±»ä¸‹åˆ›å»º
3. **æ·»åŠ æ–°API**ï¼šåœ¨ `app/api/` ä¸‹åˆ›å»º `route.ts`
4. **ä¿®æ”¹é¢„è®¾**ï¼šç¼–è¾‘ `config/presets.ts`
5. **è°ƒæ•´æ ·å¼**ï¼šä¿®æ”¹ `tailwind.config.ts` æˆ–ç»„ä»¶å†…è”æ ·å¼

---

<div align="center">
  <strong>é¡¹ç›®ç»“æ„è®¾è®¡å®Œæˆ âœ…</strong>
</div>
